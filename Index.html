<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>彩度・明度フィルター</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: sans-serif;
      margin: 2rem;
    }
    .controls {
      margin-bottom: 1rem;
    }
    .controls label {
      margin: 0 1rem;
      font-size: 0.9rem;
    }
    video {
      border: 2px solid #ccc;
      border-radius: 4px;
      /* 初期フィルター値 */
      filter: saturate(100%) brightness(100%);
    }
  </style>
</head>
<body>
  <div class="controls">
    <label>
      彩度
      <input type="range" id="saturation" min="0" max="200" value="100">
      <span id="satVal">100%</span>
    </label>
    <label>
      明度
      <input type="range" id="brightness" min="0" max="200" value="100">
      <span id="brightVal">100%</span>
    </label>
  </div>

  <video id="video" width="640" height="480" autoplay playsinline></video>

  <script>
    const video = document.getElementById('video');
    const satSlider = document.getElementById('saturation');
    const brightSlider = document.getElementById('brightness');
    const satVal = document.getElementById('satVal');
    const brightVal = document.getElementById('brightVal');

    // カメラを自動起動
    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      } catch (err) {
        alert('カメラにアクセスできません: ' + err.message);
        console.error(err);
      }
    }

    // スライダー値に合わせてフィルター更新
    function updateFilter() {
      const s = satSlider.value;
      const b = brightSlider.value;
      video.style.filter = `saturate(${s}%) brightness(${b}%)`;
      satVal.textContent    = `${s}%`;
      brightVal.textContent = `${b}%`;
    }

    // イベント登録
    satSlider.addEventListener('input', updateFilter);
    brightSlider.addEventListener('input', updateFilter);

    // ページ読み込み時
    window.addEventListener('DOMContentLoaded', () => {
      startCamera();
      updateFilter(); // 初期表示
    });
  </script>
</body>
</html>
